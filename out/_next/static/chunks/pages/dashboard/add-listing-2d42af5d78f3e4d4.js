(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1428],{97369:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/add-listing",function(){return i(41730)}])},41730:function(e,t,i){"use strict";i.r(t);var n=i(72006),a=i(4405),s=i(11527),r=i(54996),l=i.n(r),o=i(50959),c=i(93957),d=i(96301),u=i(76433),m=i(81295),h=i(38528),g=i(48453),f=i(1759),p=i(90019),x=i(97427),v=function(e){var t=e.fieldName,i=e.setFieldValue,r=(e.value,e.title),l=(0,o.useState)([]),d=l[0],u=l[1],m=(0,c.uI)({accept:"image/*",onDrop:function(e){i(t,e),u(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),h=m.getRootProps,g=m.getInputProps,f=d.map((function(e){return(0,s.jsx)("div",{className:"drop-gallery-thumb",children:(0,s.jsx)("img",{src:e.preview})},e.name)}));return(0,s.jsxs)("div",(0,a.Z)((0,n.Z)({},h()),{className:"dropzone add-listings-box",children:[(0,s.jsx)("h3",{children:r}),d.length>0?(0,s.jsxs)("div",{className:"gallery-flex",children:[f,(0,s.jsx)("input",(0,n.Z)({name:t},g()))]}):(0,s.jsxs)("div",{className:"file-upload-box",children:[(0,s.jsx)("input",(0,n.Z)({name:t},g())),(0,s.jsx)("p",{children:"Drag n drop some files here, or click to select files"})]})]}))},j=u.Ry().shape({name:u.Z_().min(5,"Name is too short,it should be more than 5 character").required("Name is Required"),city:u.Z_().required("City is Requied").notOneOf([u.iH("Select City")],"Select the city please"),seoTitle:u.Z_().min(5,"Seo Title is too short,it should be more than 5 character").required("Seotitle is Required"),feature:u.IX().of(u.Z_()),location:u.Ry().shape({latitude:u.Z_().required("Latitude is Required"),longitude:u.Z_().required("Longitude is Required"),state:u.Z_().required("State is Required"),zip_code:u.Z_().required("Zip Code is Required"),address:u.Z_().required("Address is Required")}),description:u.Z_().min(5,"Description is too short,it should be more than 5 character").required("Description is Required"),hotelSupportNumber:u.Z_().min(5,"Support number is too short,it should be more than 5 character").required("Support Number is Required"),googleMapUrl:u.Z_().url().required("Map Url is Required"),roomPhotos:u.IX(),dinningAreaPhotos:u.IX(),commonAreaPhotos:u.IX(),coverImage:u.IX()});t.default=function(){var e,t=(0,m.Z)().cities,i=(0,h.Z)().features,n=(0,x.pk)(),a=(0,f.useMutation)({mutationFn:function(e){return p.Z.addNewListing(e,n)},mutationKey:"addNewLising"}),r=a.mutate,c=a.isLoading;return console.log("addlisting isloading:- ",c),(0,o.useEffect)((function(){console.log("addlisting isloading:- ",c)}),[c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{}),(0,s.jsxs)("div",{className:"main-content d-flex flex-column",children:[null!==(e=!c)&&void 0!==e?e:(0,s.jsx)("div",{class:"sub-preloader",children:(0,s.jsx)("div",{class:"spinner-border text-light",role:"status"})}),(0,s.jsxs)("div",{className:"breadcrumb-area",children:[(0,s.jsx)("h1",{children:"Add Listings"}),(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"item",children:(0,s.jsx)(l(),{href:"/dashboard",children:(0,s.jsx)("a",{children:"Home"})})}),(0,s.jsx)("li",{className:"item",children:(0,s.jsx)(l(),{href:"/dashboard",children:(0,s.jsx)("a",{children:"Dashboard"})})}),(0,s.jsx)("li",{className:"item",children:"Add Listings"})]})]}),(0,s.jsx)(d.J9,{initialValues:{name:"",city:"Select City",seoTitle:"",feature:[],location:{latitude:"",state:"",longitude:"",zip_code:"",address:""},description:"",hotelSupportNumber:"",roomPhotos:[],dinningAreaPhotos:[],commonAreaPhotos:[],coverImage:[],googleMapUrl:""},onSubmit:function(e,t){var i=t.resetForm,n=new FormData;Object.keys(e).forEach((function(t){"roomPhotos"===t||"dinningAreaPhotos"===t||"commonAreaPhotos"===t||"coverImage"===t?e[t].forEach((function(e){n.append(t,e,e.name)})):"location"===t?Object.keys(e[t]).forEach((function(i){n.append("".concat(t,"[").concat(i,"]"),e[t][i])})):"feature"===t?e[t].forEach((function(e){n.append(t,e)})):n.append(t,e[t])})),r(n),i({name:"",city:"Select City",seoTitle:"",feature:[],location:{latitude:"",state:"",longitude:"",zip_code:"",address:""},description:"",hotelSupportNumber:"",roomPhotos:[],dinningAreaPhotos:[],commonAreaPhotos:[],coverImage:[],googleMapUrl:""})},validationSchema:j,children:function(e){var n,a,r,l=e.values,o=e.errors,c=(e.touched,e.handleChange),d=(e.handleBlur,e.handleSubmit),u=(e.isSubmitting,e.setFieldValue),m=e.submitForm;return(0,s.jsxs)("form",{onSubmit:d,children:[(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Basic Informations"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{className:"".concat((null===o||void 0===o?void 0:o.name)?"text-danger":""),children:[(0,s.jsx)("i",{className:"bx bx-briefcase-alt"}),null!==(n=o.name)&&void 0!==n?n:"Listing Title:"]}),(0,s.jsx)("input",{type:"text",name:"name",value:l.name,onChange:c,className:"form-control",placeholder:"Name of your business"})]})}),(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{className:"".concat((null===o||void 0===o?void 0:o.seoTitle)?"text-danger":""),children:[(0,s.jsx)("i",{className:"bx bx-duplicate"})," ",null!==(a=o.seoTitle)&&void 0!==a?a:"Enter Seo Title:"]}),(0,s.jsx)("input",{type:"text",name:"seoTitle",value:l.seoTitle,onChange:c,className:"form-control",placeholder:"Enter Seo Title"})]})})]})]}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Location"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{className:"".concat((null===o||void 0===o?void 0:o.name)?"text-danger":""),children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," ",null!==(r=null===o||void 0===o?void 0:o.city)&&void 0!==r?r:"City:"]}),(0,s.jsxs)("select",{value:l.city,name:"city",onChange:c,className:"dashbaord-category-select",children:[(0,s.jsx)("option",{value:"Slelect City",children:"Select City"}),t.map((function(e){var t=e._id,i=e.name,n=e.slug;return(0,s.jsx)("option",{value:n,children:i},t)}))]})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," Address:"]}),(0,s.jsx)("input",{type:"text",value:l.location.address,name:"location.address",onChange:c,className:"form-control",placeholder:"e.g. 55 County Laois"})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," State:"]}),(0,s.jsx)("input",{type:"text",value:l.location.state,name:"location.state",onChange:c,className:"form-control"})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," Zip-Code:"]}),(0,s.jsx)("input",{type:"text",value:l.location.zip_code,onChange:c,name:"location.zip_code",className:"form-control"})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," Longitude:"]}),(0,s.jsx)("input",{type:"text",value:l.location.longitude,onChange:c,name:"location.longitude",className:"form-control"})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," Latitude:"]}),(0,s.jsx)("input",{type:"text",value:l.location.latitude,onChange:c,name:"location.latitude",className:"form-control"})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-menu-alt-left"})," Google Map Url:"]}),(0,s.jsx)("input",{type:"text",value:l.googleMapUrl,onChange:c,name:"googleMapUrl",className:"form-control"})]})})]})]}),[{field:"coverImage",title:"Add Cover  images (Gallery)"},{field:"roomPhotos",title:"Add Rooms  images (Gallery)"},{field:"commonAreaPhotos",title:"Add Common Area  images (Gallery)"},{field:"dinningAreaPhotos",title:"Add Dinning images (Gallery)"}].map((function(e){return(0,s.jsx)(v,{setFieldValue:u,fieldName:e.field,value:l[e.field],title:e.title},e.field)})),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Details"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-text"})," Description:"]}),(0,s.jsx)("textarea",{value:l.description,name:"description",onChange:c,cols:"30",rows:"7",className:"form-control",placeholder:"Details..."})]})}),(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("i",{className:"bx bx-phone-call"})," Support Number:"," "]}),(0,s.jsx)("input",{type:"text",name:"hotelSupportNumber",value:l.hotelSupportNumber,onChange:c,className:"form-control"})]})})]})]}),(0,s.jsxs)("div",{className:"add-listings-box pb-2",children:[(0,s.jsx)("h3",{children:"Facilities"}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("ul",{className:"facilities-list",children:i.map((function(e){var t=e._id,i=e.feature_name;return(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:"feature",value:t,onChange:function(e){e.target.checked?u("feature",l.feature.concat(t)):u("feature",l.feature.filter((function(e){return e!=t})))}}),(0,s.jsx)("span",{children:i})]})},t)}))})})]}),(0,s.jsx)("div",{className:"add-listings-btn",children:(0,s.jsx)("button",{type:"submit",onClick:m,children:"Submit Listings"})})]})}})]})]})}},7985:function(e,t,i){"use strict";var n=i(57135),a=i(96583),s=i(14121),r=i(95624),l=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,s.Z.get("".concat(r.Z.url,"/api/listing/city"))];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)((function(e,t){return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s.Z.post("".concat(r.Z.url,"/api/listing/city"),e,{headers:{authorization:"Bearer ".concat(t)}})];case 1:return[2,i.sent().data]}}))}));return function(t,i){return e.apply(this,arguments)}}(),c={getAllCity:l,addNewCity:o};t.Z=c},74857:function(e,t,i){"use strict";var n=i(57135),a=i(96583),s=i(14121),r=i(95624),l=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,s.Z.get("".concat(r.Z.url,"/api/listing/feature"))];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)((function(e,t){return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s.Z.post("".concat(r.Z.url,"/api/listing/feature"),e,{headers:{authorization:"Bearer ".concat(t)}})];case 1:return[2,i.sent().data]}}))}));return function(t,i){return e.apply(this,arguments)}}(),c={getAllAminites:l,addNewFeatures:o};t.Z=c},90019:function(e,t,i){"use strict";var n=i(57135),a=i(96583),s=i(14121),r=i(95624),l=function(){var e=(0,n.Z)((function(){var e,t,i,n,l,o,c=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2?c[2]:void 0,n=c.length>3?c[3]:void 0,l=t?"&typeOfRoom="+t:"",o=e?"&city="+e:"",[4,s.Z.get("".concat(r.Z.url,"/api/listing?limit=").concat(i,"&page=").concat(n).concat(l).concat(o))];case 1:return[2,a.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)((function(){var e,t,i,n,l,o=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1?o[1]:void 0,i=o.length>2?o[2]:void 0,n=o.length>3?o[3]:void 0,l=e?"&city="+e:"",[4,s.Z.get("".concat(r.Z.url,"/api/listing/admin/all?limit=").concat(t,"&page=").concat(i).concat(l),{headers:{authorization:"Bearer ".concat(n)}})];case 1:return[2,a.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,n.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,s.Z.get("".concat(r.Z.url,"/api/listing/").concat(e))];case 1:return[2,t.sent().data]}}))}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)((function(e,t){return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s.Z.post("".concat(r.Z.url,"/api/listing?"),e,{headers:{authorization:"Bearer ".concat(t)}})];case 1:return[2,i.sent().data]}}))}));return function(t,i){return e.apply(this,arguments)}}(),u={getAllListing:l,addNewListing:d,getListingById:c,getAllListingForAdmin:o};t.Z=u},81295:function(e,t,i){"use strict";var n=i(50959),a=i(1759),s=i(7985);t.Z=function(){var e=(0,n.useState)([]),t=e[0],i=e[1],r=(0,a.useQuery)({queryFn:s.Z.getAllCity,queryKey:"getAllcities",onSuccess:function(e){i(e.data)}});return{cities:t,refetch:r.refetch,isLoading:r.isLoading}}},38528:function(e,t,i){"use strict";var n=i(50959),a=i(1759),s=i(74857);t.Z=function(){var e=(0,n.useState)([]),t=e[0],i=e[1],r=(0,a.useQuery)({queryFn:s.Z.getAllAminites,queryKey:"getAllFeatures",onSuccess:function(e){i(e.data)}});return{features:t,refetch:r.refetch,isLoading:r.isLoading}}},77637:function(e,t,i){"use strict";function n(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}i.d(t,{Z:function(){return n}})}},function(e){e.O(0,[8577,620,8453,9774,2888,179],(function(){return t=97369,e(e.s=t);var t}));var t=e.O();_N_E=t}]);