(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1029],{76626:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/edit-listing/[id]",function(){return n(49032)}])},95657:function(e,i,n){"use strict";var s=n(72006),t=n(4405),a=n(11527),c=n(50959),l=n(93957),r=n(59303);i.Z=function(e){var i=e.displayIM,n=e.toggleIM,o=(0,c.useState)([]),d=o[0],u=o[1],m=(0,l.uI)({accept:"image/*",onDrop:function(e){u(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),h=m.getRootProps,p=m.getInputProps,x=d.map((function(e){return(0,a.jsx)("div",{className:"drop-gallery-thumb",children:(0,a.jsx)("img",{src:e.preview})},e.name)}));return(0,a.jsx)("div",{className:i?"modal loginRegisterModal show":"modal loginRegisterModal",id:"loginRegisterModal",children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,a.jsx)("div",{className:"modal-content",children:(0,a.jsxs)(r.mQ,{children:[(0,a.jsx)("button",{type:"button",className:"close",onClick:function(){n(!i)},children:(0,a.jsx)("i",{className:"bx bx-x"})}),(0,a.jsx)("ul",{className:"nav nav-tabs",id:"myTab",children:(0,a.jsx)(r.td,{children:(0,a.jsx)(r.OK,{className:"nav-item",children:(0,a.jsx)("a",{className:"nav-link",id:"login-tab",children:"Add Images"})})})}),(0,a.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,a.jsx)(r.x4,{children:(0,a.jsx)("div",{className:"tab-pane fade show active",id:"login",children:(0,a.jsxs)("div",{className:"miran-login",children:[(0,a.jsx)("span",{className:"sub-title",children:(0,a.jsx)("span",{children:"Add Images"})}),(0,a.jsxs)("form",{onSubmit:function(e){!function(e){e.preventDefault()}(e)},children:[(0,a.jsxs)("div",(0,t.Z)((0,s.Z)({},h()),{className:"dropzone add-listings-box",children:[(0,a.jsx)("h3",{children:"add images"}),d.length>0?(0,a.jsxs)("div",{className:"gallery-flex",children:[x,(0,a.jsx)("input",(0,s.Z)({},p()))]}):(0,a.jsxs)("div",{className:"file-upload-box",children:[(0,a.jsx)("input",(0,s.Z)({},p())),(0,a.jsx)("p",{children:"Drag 'n' drop , or click to select files"})]})]})),(0,a.jsx)("button",{type:"submit",onClick:function(){toggleCM(!displayCM)},children:"Add Imges"}),(0,a.jsx)("button",{type:"submit",onClick:function(){toggleCM(!displayCM)},children:"Clear All Imges"})]})]})})})})]})})})})}},34584:function(e,i,n){"use strict";var s=n(11527);n(50959);i.Z=function(){return(0,s.jsx)("div",{className:"sub-preloader",children:(0,s.jsx)("div",{className:"spinner-border text-light",role:"status"})})}},49032:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return A}});var s=n(11527),t=n(93821),a=n(50959),c=n(72006),l=n(4405),r=n(59303),o=n(76433),d=n(1759),u=n(97427),m=n(88922),h=n(50186),p=n(96301),x=n(57135),g=n(96583),f=n(14121),j=n(95624),v=function(){var e=(0,x.Z)((function(e,i){return(0,g.__generator)(this,(function(n){switch(n.label){case 0:return[4,f.Z.post("".concat(j.Z.url,"/api/listing/availability"),e,{headers:{authorization:"Bearer ".concat(i)}})];case 1:return[2,n.sent().data]}}))}));return function(i,n){return e.apply(this,arguments)}}(),b={addNewAvailability:v},y=o.Ry().shape({roomTypeId:o.Z_().notOneOf(["Type Of Room City"]).required("Select A select room Id Please"),price:o.Rx().required("Enter a price"),numberOfOccupancies:o.Rx().required("Enter Number of occupancies")});var N=function(e){var i=e.displayAM,n=e.toggleAM,t=e.Availability,a=e.residentId,o=(0,h.Z)().roomTypes;console.log(a);var x,g,f,j=(0,d.useQueryClient)(),v=(0,u.pk)(),N=(0,d.useMutation)({mutationFn:function(e){return b.addNewAvailability(e,v)},onSuccess:function(){n(),m.Am.success("New Availability added Successfully"),j.invalidateQueries(["listingDetailById ".concat(a)])},onError:function(e){var i,n,s=(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)||"".concat(featureName," alredy exist");m.Am.error(s),setFeatureName("")}}).mutate;return(0,s.jsx)("div",{className:i?"modal loginRegisterModal show":"modal loginRegisterModal",id:"loginRegisterModal",children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,s.jsx)("div",{className:"modal-content",children:(0,s.jsxs)(r.mQ,{children:[(0,s.jsx)("button",{type:"button",className:"close",onClick:function(){n(!i)},children:(0,s.jsx)("i",{className:"bx bx-x"})}),(0,s.jsx)("h5",{children:"Add Availability "}),(0,s.jsx)("div",{className:"tab-content",id:"myTabContent",children:(0,s.jsx)("div",{className:"tab-pane fade show active",id:"login",children:(0,s.jsxs)("div",{className:"miran-login",children:[(0,s.jsx)("span",{className:"sub-title",children:(0,s.jsx)("span",{children:"Add Availability"})}),(0,s.jsx)(p.J9,{initialValues:{roomTypeId:"Type Of Room City",price:void 0,numberOfOccupancies:void 0},onSubmit:function(e){N((0,l.Z)((0,c.Z)({},e),{residentId:a,price:Number(e.price),numberOfOccupancies:Number(e.numberOfOccupancies)}))},validationSchema:y,children:function(e){var i=e.handleSubmit,n=e.handleChange,a=e.values,c=e.errors;return(0,s.jsxs)("form",{onSubmit:i,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"".concat(c.roomTypeId?"pb-3 text-danger":"pb-3"),children:null!==(x=c.roomTypeId)&&void 0!==x?x:"Select Room Type"}),(0,s.jsxs)("select",{name:"roomTypeId",className:"dashbaord-category-select",required:!0,value:a.roomTypeId,onChange:n,children:[(0,s.jsx)("option",{value:"Type Of Room City",children:"Select Type Of Room"}),o.map((function(e){var i=e.id,n=e.typeOfRoom;if(!t.includes(n))return(0,s.jsx)("option",{value:i,children:n},i)}))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"".concat(c.numberOfOccupancies?"pb-3 text-danger":"pb-3"),children:null!==(g=c.numberOfOccupancies)&&void 0!==g?g:"Enter Number Of Occupancy"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter Number Of Availability",onChange:n,name:"numberOfOccupancies",value:a.numberOfOccupancies,required:!0,className:"form-control"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"".concat(c.price?"pb-3 text-danger":"pb-3"),children:null!==(f=c.price)&&void 0!==f?f:"Enter price"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter The price",onChange:n,value:a.price,name:"price",required:!0,className:"form-control"})]})]}),(0,s.jsx)("button",{type:"submit",children:"Add Aminities"})]})}})]})})})]})})})})},Z=n(95657),w=n(34584),O=n(24299),A=function(){var e=(0,a.useState)(!1),i=e[0],n=e[1],c=(0,a.useState)(!1),l=c[0],r=c[1],o=(0,t.useRouter)().query.id,d=(0,O.Z)(o),u=d.listing;if(d.isLoading||!u)return(0,s.jsx)(w.Z,{});var m=u.name,h=u.location,p=u.AvailAbility;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"main-content d-flex flex-column",children:[(0,s.jsx)("div",{className:"breadcrumb-area",children:(0,s.jsx)("h1",{children:"Edit Listing"})}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Basic Details"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{children:["Name: ",m]})})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{children:["Location ",h.address," "]})})})]})]}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Edit Aminities"}),(0,s.jsx)("div",{className:"row",children:["Single Bed","Double Bed","Triple Bed","Wifi","Sports Complex","Gamming Zone"].map((function(e,i){return(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{class:"form-check form-switch",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:e})]})})}))})]}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"Favourite Aminities *"}),(0,s.jsx)("div",{className:"row",children:["Single Bed","Double Bed","Wifi","Sports Complex"].map((function(e,i){return(0,s.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,s.jsxs)("div",{class:"form-check form-switch",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"flexSwitchCheckDefault",children:e})]})})}))})]}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"lists"}),(0,s.jsxs)("table",{className:"table table-striped",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"#"}),(0,s.jsx)("th",{scope:"col",children:"Type Of Room"}),(0,s.jsx)("th",{scope:"col",children:"Number Of Availability"}),(0,s.jsx)("th",{scope:"col",children:"Price"}),(0,s.jsx)("th",{scope:"col",children:"Edit "})]})}),(0,s.jsx)("tbody",{children:p.map((function(e){var i=e.id,n=e.roomType,t=e.numberOfOccupancies,a=e.price;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"row",children:"1"}),(0,s.jsx)("td",{children:n.typeOfRoom}),(0,s.jsx)("td",{children:t}),(0,s.jsx)("td",{children:a}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{type:"button",className:"btn btn-success",children:(0,s.jsx)("i",{className:"fas fa-edit"})})})]},i)}))})]}),(0,s.jsx)("div",{className:"add-listings-btn sub-btn",children:(0,s.jsx)("button",{onClick:function(){return r(!0)},type:"submit",children:"Add new Availability"})})]}),(0,s.jsxs)("div",{className:"add-listings-box",children:[(0,s.jsx)("h3",{children:"images"}),(0,s.jsxs)("div",{className:"gallery-flex",children:[(0,s.jsxs)("div",{className:"drop-gallery-thumb",children:[(0,s.jsx)("div",{className:"close",children:"X"}),(0,s.jsx)("img",{src:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?cs=srgb&dl=pexels-pixabay-268533.jpg&fm=jpg",alt:"noimg"})]}),(0,s.jsxs)("div",{className:"drop-gallery-thumb",children:[(0,s.jsx)("div",{className:"close",children:"X"}),(0,s.jsx)("img",{src:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?cs=srgb&dl=pexels-pixabay-268533.jpg&fm=jpg",alt:"noimg"})]})]}),(0,s.jsx)("div",{className:"add-listings-btn sub-btn",children:(0,s.jsx)("button",{type:"submit",onClick:function(){n(!i)},children:"Add Images"})})]}),(0,s.jsx)("div",{className:"add-listings-btn",children:(0,s.jsx)("button",{type:"submit",children:"Update Listings"})}),(0,s.jsx)("div",{className:"flex-grow-1"})]}),(0,s.jsx)(Z.Z,{displayIM:i,toggleIM:n}),(0,s.jsx)(N,{Availability:p.reduce((function(e,i){return e+" "+i.roomType.typeOfRoom}),""),displayAM:l,toggleAM:function(){r(!l)},residentId:o})]})}},90019:function(e,i,n){"use strict";var s=n(57135),t=n(96583),a=n(14121),c=n(95624),l=function(){var e=(0,s.Z)((function(){var e,i,n,s,l,r,o=arguments;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:void 0,i=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2?o[2]:void 0,s=o.length>3?o[3]:void 0,l=i?"&typeOfRoom="+i:"",r=e?"&city="+e:"",[4,a.Z.get("".concat(c.Z.url,"/api/listing?limit=").concat(n,"&page=").concat(s).concat(l).concat(r))];case 1:return[2,t.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,s.Z)((function(){var e,i,n,s,l,r=arguments;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:void 0,i=r.length>1?r[1]:void 0,n=r.length>2?r[2]:void 0,s=r.length>3?r[3]:void 0,l=e?"&city="+e:"",[4,a.Z.get("".concat(c.Z.url,"/api/listing/admin/all?limit=").concat(i,"&page=").concat(n).concat(l),{headers:{authorization:"Bearer ".concat(s)}})];case 1:return[2,t.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,s.Z)((function(e){return(0,t.__generator)(this,(function(i){switch(i.label){case 0:return[4,a.Z.get("".concat(c.Z.url,"/api/listing/").concat(e))];case 1:return[2,i.sent().data]}}))}));return function(i){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)((function(e,i){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,a.Z.post("".concat(c.Z.url,"/api/listing?"),e,{headers:{authorization:"Bearer ".concat(i)}})];case 1:return[2,n.sent().data]}}))}));return function(i,n){return e.apply(this,arguments)}}(),u={getAllListing:l,addNewListing:d,getListingById:o,getAllListingForAdmin:r};i.Z=u},30889:function(e,i,n){"use strict";var s=n(57135),t=n(96583),a=n(14121),c=n(95624),l=function(){var e=(0,s.Z)((function(){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,a.Z.get("".concat(c.Z.url,"/api/listing/roomType"))];case 1:return[2,e.sent().data]}}))}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,s.Z)((function(e,i){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,a.Z.post("".concat(c.Z.url,"/api/listing/roomType"),e,{headers:{authorization:"Bearer ".concat(i)}})];case 1:return[2,n.sent().data]}}))}));return function(i,n){return e.apply(this,arguments)}}(),o={getAllRoomType:l,addNewRoomType:r};i.Z=o},24299:function(e,i,n){"use strict";var s=n(50959),t=n(1759),a=n(90019);i.Z=function(e){var i=(0,s.useState)(void 0),n=i[0],c=i[1];return{listing:n,isLoading:(0,t.useQuery)({queryFn:function(){return a.Z.getListingById(e)},queryKey:["listingDetailById ".concat(e)],onSuccess:function(e){console.log(e),c(e.data)}}).isLoading}}},50186:function(e,i,n){"use strict";var s=n(50959),t=n(1759),a=n(30889);i.Z=function(){var e=(0,s.useState)([]),i=e[0],n=e[1],c=(0,t.useQuery)({queryFn:a.Z.getAllRoomType,queryKey:"getAllRoomType",onSuccess:function(e){n(e.data)}});return{roomTypes:i,refetch:c.refetch,isLoading:c.isLoading}}}},function(e){e.O(0,[8577,620,9774,2888,179],(function(){return i=76626,e(e.s=i);var i}));var i=e.O();_N_E=i}]);